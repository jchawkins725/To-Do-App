<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>To Do App</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    </head>
    <body>
        <div id="root"></div>
        <script type="text/babel">
            function List(props) {
              return (
                <ul> 
                  <div>{props.items.map((x, index) =>
                      <li id="flexcontainer" key={index}>
                        <div id="circle" onClick={() => props.complete(index)}>
                          {props.items[index].done &&
                            <i className="fas fa-check"></i>
                          }
                        </div>
                        <div id="itemcontainer">
                          {x.value}</div>
                        <i className="fas fa-times" onClick={() => props.delete(index)}></i>
                      </li>)}                  
                  </div>
                </ul>);
            }

            function Form(props) {
              return (
                <form id="taskform" onSubmit={props.submit}>
                  <input id="taskinput"
                        value={props.value}
                        onChange={props.change}
                        placeholder="enter task" required
                      />
                  <button id="add"><i class="fas fa-plus"></i></button>
                </form>
              );
            }

            class TodoApp extends React.Component {
              constructor(props) {
                super(props);
                this.state = {
                  input: "",
                  items: []
                };
                this.handleChange = this.handleChange.bind(this);
                this.handleAdd = this.handleAdd.bind(this);
                this.handleDelete = this.handleDelete.bind(this);
                this.handleComplete = this.handleComplete.bind(this);
              }
              handleChange(event) {
                const itemText = event.target.value;
                this.setState({input:itemText});
              }
              handleAdd(event) {
                event.preventDefault();
                const items = this.state.items;
                items.push({
                  value: this.state.input,
                  done: false
                })
                this.setState({
                  input: "",
                  items: items
                });
              }
              handleDelete(i) {
                this.state.items.splice(i,1)
                this.setState({
                  items: this.state.items
                })
              }
              handleComplete (i) {
                var items = this.state.items;
                var item = this.state.items[i];
                item.done = !item.done;
                this.setState({
                  items: items
                });
              }

              render() {
                return (
                  <div>
                    <h1>To Do List App</h1>
                    <Form className="form" value={this.state.input} submit={this.handleAdd} change={this.handleChange}/>
                <List complete={this.handleComplete} items={this.state.items} delete={this.handleDelete}/>
                  </div>
                );
              }
            }

            ReactDOM.render(<TodoApp />, document.getElementById("root"));</script>
    </body>
</html>